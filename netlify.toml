[build]
  # Diretório onde estão os arquivos estáticos prontos para produção
  publish = "frontend-production"
  # Comando de build vazio pois os arquivos já estão buildados
  command = "echo 'Using pre-built assets from frontend-production'"
  functions = "netlify/functions"

# ================================
# FORCE HTTPS E REMOVE WWW
# (Netlify faz isso automaticamente, mas forçamos aqui)
# ================================

# Redirecionamento da API para a Function
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/api"
  status = 200

# ================================
# REDIRECTS PARA CORRIGIR LINKS QUEBRADOS
# /areas/[cidade]/ -> /[cidade]-house-cleaning/
# ================================

# Areas SEM wildcard (Google encontrou essas URLs exatas)
[[redirects]]
  from = "/areas/milton"
  to = "/milton-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/brookhaven"
  to = "/brookhaven-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/brookhaven/"
  to = "/brookhaven-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/johns-creek"
  to = "/johns-creek-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/druid-hills"
  to = "/decatur-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/vinings"
  to = "/vinings-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/atlanta"
  to = "/"
  status = 301

[[redirects]]
  from = "/areas/smyrna"
  to = "/"
  status = 301

[[redirects]]
  from = "/areas/buckhead"
  to = "/buckhead-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/alpharetta"
  to = "/alpharetta-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/roswell"
  to = "/roswell-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/dunwoody"
  to = "/dunwoody-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/sandy-springs"
  to = "/sandy-springs-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/decatur"
  to = "/decatur-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/suwanee"
  to = "/suwanee-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/marietta"
  to = "/marietta-house-cleaning/"
  status = 301

# /about -> home (Fix GSC redirect loop)
[[redirects]]
  from = "/about"
  to = "/"
  status = 301

[[redirects]]
  from = "/about/"
  to = "/"
  status = 301

# politicas-legais -> legal pages
[[redirects]]
  from = "/politicas-legais"
  to = "/legal/privacy-policy"
  status = 301

[[redirects]]
  from = "/politicas-legais/*"
  to = "/legal/privacy-policy"
  status = 301

# Areas COM wildcard
[[redirects]]
  from = "/areas/atlanta/*"
  to = "/"
  status = 301

[[redirects]]
  from = "/areas/marietta/*"
  to = "/marietta-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/alpharetta/*"
  to = "/alpharetta-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/brookhaven/*"
  to = "/brookhaven-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/buckhead/*"
  to = "/buckhead-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/dunwoody/*"
  to = "/dunwoody-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/sandy-springs/*"
  to = "/sandy-springs-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/smyrna/*"
  to = "/"
  status = 301

[[redirects]]
  from = "/areas/vinings/*"
  to = "/vinings-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/johns-creek/*"
  to = "/johns-creek-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/roswell/*"
  to = "/roswell-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/decatur/*"
  to = "/decatur-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/druid-hills/*"
  to = "/decatur-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/milton/*"
  to = "/milton-house-cleaning/"
  status = 301

[[redirects]]
  from = "/areas/suwanee/*"
  to = "/suwanee-house-cleaning/"
  status = 301

# ================================
# REDIRECTS PARA PÁGINAS PROBLEMÁTICAS DO GSC
# ================================

# /Index.html -> / (Case sensitivity)
[[redirects]]
  from = "/Index.html"
  to = "/"
  status = 301

# /es/ -> /pt/ (Não temos espanhol, redirecionar para português)
[[redirects]]
  from = "/es/"
  to = "/pt/"
  status = 301

[[redirects]]
  from = "/es/*"
  to = "/pt/"
  status = 301

# /cgi-bin/ -> / (Pasta inexistente, possível scanner de vulnerabilidades)
[[redirects]]
  from = "/cgi-bin/*"
  to = "/"
  status = 301

# Remover query parameters estranhos
[[redirects]]
  from = "/*?ND"
  to = "/:splat"
  status = 301

[[redirects]]
  from = "/*?ND=*"
  to = "/:splat"
  status = 301

# Trailing slash normalization para páginas HTML
[[redirects]]
  from = "/services/"
  to = "/services.html"
  status = 301

[[redirects]]
  from = "/services"
  to = "/services.html"
  status = 301

[[redirects]]
  from = "/contact/"
  to = "/contact.html"
  status = 301

[[redirects]]
  from = "/contact"
  to = "/contact.html"
  status = 301

[[redirects]]
  from = "/book/"
  to = "/book.html"
  status = 301

[[redirects]]
  from = "/book"
  to = "/book.html"
  status = 301

# Blog posts antigos - redirect para formato correto
[[redirects]]
  from = "/blog/dunwoody-cleaning-checklist"
  to = "/blog/weekend-cleaning-dunwoody-professionals/"
  status = 301

[[redirects]]
  from = "/blog/dunwoody-cleaning-checklist/"
  to = "/blog/weekend-cleaning-dunwoody-professionals/"
  status = 301

[[redirects]]
  from = "/blog/dunwoody-cleaning-checklist.html"
  to = "/blog/weekend-cleaning-dunwoody-professionals/"
  status = 301



# ================================
# CACHE CONTROL HEADERS
# ================================

[[headers]]
  for = "/*.webp"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.png"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.jpg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.woff2"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.svg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
