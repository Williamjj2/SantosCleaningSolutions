 (function (){'use strict';const cityConfig ={'marietta':{name:'Marietta',page:'/marietta-house-cleaning/'},'atlanta':{name:'Atlanta',page:'/'},'roswell':{name:'Roswell',page:'/roswell-house-cleaning/'},'alpharetta':{name:'Alpharetta',page:'/alpharetta-house-cleaning/'},'sandy springs':{name:'Sandy Springs',page:'/sandy-springs-house-cleaning/'},'dunwoody':{name:'Dunwoody',page:'/dunwoody-house-cleaning/'},'johns creek':{name:'Johns Creek',page:'/johns-creek-house-cleaning/'},'buckhead':{name:'Buckhead',page:'/buckhead-house-cleaning/'},'milton':{name:'Milton',page:'/milton-house-cleaning/'},'suwanee':{name:'Suwanee',page:'/suwanee-house-cleaning/'},'decatur':{name:'Decatur',page:'/decatur-house-cleaning/'},'brookhaven':{name:'Brookhaven',page:'/brookhaven-house-cleaning/'},'vinings':{name:'Vinings',page:'/vinings-house-cleaning/'},'kennesaw':{name:'Kennesaw',page:'/marietta-house-cleaning/'},'smyrna':{name:'Smyrna',page:'/marietta-house-cleaning/'},'acworth':{name:'Acworth',page:'/marietta-house-cleaning/'},'woodstock':{name:'Woodstock',page:'/marietta-house-cleaning/'}};const defaultCity ={name:'Atlanta Metro',page:'/'};const personalizeElements = function (cityData){const heroBadge = document.querySelector('.hero-badge');if (heroBadge){heroBadge.innerHTML = `<i class="fas fa-bolt"></i> Fast Booking Response Available in ${cityData.name}`;}const heroTitle = document.querySelector('.hero h1');if (heroTitle){heroTitle.textContent = `Your ${cityData.name}Home Sparkling Clean Tomorrow`;}document.querySelectorAll('[data-geo-city]').forEach(el =>{el.textContent = cityData.name;});try{localStorage.setItem('detectedCity',JSON.stringify({name:cityData.name,page:cityData.page,timestamp:Date.now()}));}catch (e){}if (typeof gtag === 'function'){gtag('event','geo_personalization',{'event_category':'Personalization','event_label':cityData.name,'detected_city':cityData.name});}};const getCachedCity = function (){try{const cached = localStorage.getItem('detectedCity');if (cached){const data = JSON.parse(cached);const age = Date.now() - data.timestamp;if (age < 24 * 60 * 60 * 1000){return data;}}}catch (e){}return null;};const detectCity = function (){const cached = getCachedCity();if (cached){personalizeElements(cached);return;}fetch('https:.then(response => response.json()) .then(data =>{const detectedCity = (data.city || '').toLowerCase().trim();const detectedRegion = (data.region || '').toLowerCase();if (detectedRegion !== 'georgia' && detectedRegion !== 'ga'){personalizeElements(defaultCity);return;}const cityData = cityConfig[detectedCity] || defaultCity;personalizeElements(cityData);}) .catch(error =>{console.log('Geo detection failed,using default:',error);personalizeElements(defaultCity);});};if (document.readyState === 'loading'){document.addEventListener('DOMContentLoaded',detectCity);}else{detectCity();}window.geoPersonalize ={setCity:function (cityName){const city = cityConfig[cityName.toLowerCase()] || defaultCity;personalizeElements(city);},clearCache:function (){try{localStorage.removeItem('detectedCity');}catch (e){}}};})();