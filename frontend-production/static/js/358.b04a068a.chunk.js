"use strict";(self.webpackChunksantos_cleaning_frontend=self.webpackChunksantos_cleaning_frontend||[]).push([[358],{358:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var t=a(43),l=a(228),r=a(768),c=a(505),i=a(579);const n=()=>{const[e,s]=(0,t.useState)(!1),[a,n]=(0,t.useState)(""),[d,o]=(0,t.useState)(!0),[x,m]=(0,t.useState)([]),[h,g]=(0,t.useState)(!0),[u,p]=(0,t.useState)("all"),[f,j]=(0,t.useState)(null),[b,N]=(0,t.useState)(!1),[y,v]=(0,t.useState)(!1),[w,k]=(0,t.useState)(!1),[C,S]=(0,t.useState)(null),[E,A]=(0,t.useState)({total:0,new:0,contacted:0,converted:0,lost:0}),L={new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",converted:"bg-green-100 text-green-800",lost:"bg-red-100 text-red-800"},_={new:"Novo",contacted:"Contatado",converted:"Convertido",lost:"Perdido"},D=()=>{"santos2024admin"===a?(s(!0),o(!1),localStorage.setItem("santos_admin_auth","true"),r.Ay.success("Login realizado com sucesso!")):(r.Ay.error("Senha incorreta!"),n(""))};(0,t.useEffect)(()=>{"true"===localStorage.getItem("santos_admin_auth")&&(s(!0),o(!1))},[]);const $=(0,t.useCallback)(async()=>{if(e)try{g(!0),console.log("Buscando leads com filtro:",u);const e=await c.K.getLeads("all"===u?null:u);console.log("Resposta da API:",e);const s=e.leads||[];m(s);const a=(await c.K.getLeads(null)).leads||[],t={total:a.length,new:0,contacted:0,converted:0,lost:0};a.forEach(e=>{t.hasOwnProperty(e.status)&&t[e.status]++}),console.log("Estat\xedsticas calculadas:",t),A(t)}catch(s){console.error("Erro ao buscar leads:",s),r.Ay.error("Erro ao carregar leads: "+s.message)}finally{g(!1)}},[u,e]);(0,t.useEffect)(()=>{e&&$()},[$,e]);const P=async function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{await c.K.updateLead(e,{status:s,notes:a}),r.Ay.success("Status atualizado com sucesso!"),$(),N(!1)}catch(t){console.error("Erro ao atualizar lead:",t),r.Ay.error("Erro ao atualizar status: "+t.message)}},z=e=>{if(!e)return"N/A";return new Date(e).toLocaleString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},R=e=>{if(!e)return"";const s=Date.now()-new Date(e).getTime(),a=Math.floor(s/864e5),t=Math.floor(s/36e5),l=Math.floor(s/6e4);return a>0?`${a}d atr\xe1s`:t>0?`${t}h atr\xe1s`:l>0?`${l}min atr\xe1s`:"Agora mesmo"};return d?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-4",children:(0,i.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,i.jsx)("i",{className:"fas fa-shield-alt text-2xl text-blue-600"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Admin Dashboard"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Santos Cleaning Solutions"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha de Acesso"}),(0,i.jsx)("input",{type:"password",value:a,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&D(),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Digite a senha do administrador",autoFocus:!0})]}),(0,i.jsxs)("button",{onClick:D,disabled:!a,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[(0,i.jsx)("i",{className:"fas fa-sign-in-alt mr-2"}),"Entrar"]})]}),(0,i.jsx)("div",{className:"mt-6 text-center",children:(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Acesso restrito apenas para administradores"})})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-8 flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard de Leads"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Gerencie e acompanhe seus leads do formul\xe1rio de contato"})]}),(0,i.jsxs)("button",{onClick:()=>{s(!1),o(!0),localStorage.removeItem("santos_admin_auth"),r.Ay.success("Logout realizado com sucesso!")},className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-sign-out-alt mr-2"}),"Sair"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[(0,i.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)("i",{className:"fas fa-users text-blue-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:E.total})]})]})}),(0,i.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,i.jsx)("i",{className:"fas fa-star text-blue-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Novos"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:E.new})]})]})}),(0,i.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,i.jsx)("i",{className:"fas fa-phone text-yellow-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Contatados"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:E.contacted})]})]})}),(0,i.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,i.jsx)("i",{className:"fas fa-check-circle text-green-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Convertidos"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-green-600",children:E.converted})]})]})}),(0,i.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,i.jsx)("i",{className:"fas fa-times-circle text-red-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Perdidos"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-red-600",children:E.lost})]})]})})]}),(0,i.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,i.jsxs)("button",{onClick:()=>p("all"),className:"px-4 py-2 rounded-lg font-medium "+("all"===u?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Todos (",E.total,")"]}),Object.entries(_).map(e=>{let[s,a]=e;return(0,i.jsxs)("button",{onClick:()=>p(s),className:"px-4 py-2 rounded-lg font-medium "+(u===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[a," (",E[s]||0,")"]},s)}),(0,i.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,i.jsxs)("button",{onClick:async()=>{try{const e=await c.K.cleanupDemoLeads();r.Ay.success(`${e.deleted_count||0} leads demo removidos!`),$()}catch(e){console.error("Erro ao limpar leads demo:",e),r.Ay.error("Erro ao limpar leads demo: "+e.message)}},className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-broom mr-2"}),"Limpar Demos"]}),(0,i.jsxs)("button",{onClick:$,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-sync-alt mr-2"}),"Atualizar"]})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:h?(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)("i",{className:"fas fa-spinner fa-spin text-2xl text-gray-400 mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Carregando leads..."})]}):0===x.length?(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)("i",{className:"fas fa-inbox text-4xl text-gray-400 mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"all"===u?"Nenhum lead encontrado":`Nenhum lead com status "${_[u]||u}"`})]}):(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fonte"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>{return(0,i.jsxs)(l.P.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,i.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.message||"Sem mensagem"})]})}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,i.jsx)("div",{className:"text-sm text-gray-900",children:e.phone}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L[e.status]||"bg-gray-100 text-gray-800"}`,children:_[e.status]||e.status})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.source}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,i.jsx)("div",{className:"text-sm text-gray-900",children:(s=e.created_at,s?new Date(s).toLocaleString("pt-BR"):"N/A")}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:R(e.created_at)})]}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("button",{onClick:()=>{j(e),v(!0)},className:"text-blue-600 hover:text-blue-900",title:"Ver detalhes",children:(0,i.jsx)("i",{className:"fas fa-eye"})}),(0,i.jsx)("button",{onClick:()=>{j(e),N(!0)},className:"text-purple-600 hover:text-purple-900",title:"Editar status",children:(0,i.jsx)("i",{className:"fas fa-edit"})}),(0,i.jsx)("a",{href:`tel:${e.phone}`,className:"text-green-600 hover:text-green-900",title:"Ligar",children:(0,i.jsx)("i",{className:"fas fa-phone"})}),(0,i.jsx)("a",{href:`mailto:${e.email}`,className:"text-indigo-600 hover:text-indigo-900",title:"Enviar email",children:(0,i.jsx)("i",{className:"fas fa-envelope"})}),(0,i.jsx)("button",{onClick:()=>{S(e),k(!0)},className:"text-red-600 hover:text-red-900",title:"Excluir",children:(0,i.jsx)("i",{className:"fas fa-trash"})})]})})]},e.id);var s})})]})})}),b&&f&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Atualizar Lead"}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("p",{className:"font-medium",children:f.name}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:f.email})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("button",{onClick:()=>P(f.id,"contacted"),className:"w-full p-3 bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-phone mr-3"}),"Marcar como Contatado"]}),(0,i.jsxs)("button",{onClick:()=>P(f.id,"converted"),className:"w-full p-3 bg-green-100 text-green-800 rounded-lg hover:bg-green-200 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-check-circle mr-3"}),"Marcar como Convertido"]}),(0,i.jsxs)("button",{onClick:()=>P(f.id,"lost"),className:"w-full p-3 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-times-circle mr-3"}),"Marcar como Perdido"]})]}),(0,i.jsx)("div",{className:"flex gap-3 mt-6",children:(0,i.jsx)("button",{onClick:()=>N(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancelar"})})]})}),y&&f&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,i.jsx)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Detalhes do Lead"}),(0,i.jsx)("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:(0,i.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,i.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-user mr-2 text-blue-600"}),"Informa\xe7\xf5es Pessoais"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Nome"}),(0,i.jsx)("p",{className:"text-gray-900 font-medium",children:f.name})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Email"}),(0,i.jsx)("p",{className:"text-gray-900",children:f.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Telefone"}),(0,i.jsx)("p",{className:"text-gray-900",children:f.phone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Idioma"}),(0,i.jsx)("p",{className:"text-gray-900",children:f.language||"N/A"})]})]})]}),f.message&&(0,i.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,i.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-comment mr-2 text-blue-600"}),"Mensagem do Cliente"]}),(0,i.jsx)("div",{className:"bg-white p-4 rounded border border-blue-200",children:(0,i.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:f.message})})]}),(0,i.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,i.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-chart-line mr-2 text-green-600"}),"Status e Acompanhamento"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Status Atual"}),(0,i.jsx)("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${L[f.status]||"bg-gray-100 text-gray-800"}`,children:_[f.status]||f.status})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Fonte"}),(0,i.jsx)("p",{className:"text-gray-900",children:f.source})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Consentimento SMS"}),(0,i.jsx)("p",{className:"text-gray-900",children:f.sms_consent?(0,i.jsx)("span",{className:"text-green-600",children:"\u2705 Sim"}):(0,i.jsx)("span",{className:"text-red-600",children:"\u274c N\xe3o"})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Respons\xe1vel"}),(0,i.jsx)("p",{className:"text-gray-900",children:f.assigned_to||"N\xe3o atribu\xeddo"})]})]})]}),(0,i.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,i.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-calendar mr-2 text-purple-600"}),"Hist\xf3rico de Datas"]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Data de Cria\xe7\xe3o"}),(0,i.jsx)("p",{className:"text-gray-900",children:z(f.created_at)})]}),f.contacted_at&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Data do Contato"}),(0,i.jsx)("p",{className:"text-gray-900",children:z(f.contacted_at)})]}),f.converted_at&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Data da Convers\xe3o"}),(0,i.jsx)("p",{className:"text-gray-900",children:z(f.converted_at)})]})]})]}),f.notes&&(0,i.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,i.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,i.jsx)("i",{className:"fas fa-sticky-note mr-2 text-yellow-600"}),"Notas"]}),(0,i.jsx)("div",{className:"bg-white p-4 rounded border border-yellow-200",children:(0,i.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:f.notes})})]})]}),(0,i.jsxs)("div",{className:"flex gap-3 mt-8 pt-6 border-t",children:[(0,i.jsxs)("button",{onClick:()=>{v(!1),N(!0)},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 flex items-center justify-center",children:[(0,i.jsx)("i",{className:"fas fa-edit mr-2"}),"Editar Status"]}),(0,i.jsxs)("a",{href:`tel:${f.phone}`,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 flex items-center justify-center text-decoration-none",children:[(0,i.jsx)("i",{className:"fas fa-phone mr-2"}),"Ligar"]}),(0,i.jsxs)("a",{href:`mailto:${f.email}`,className:"flex-1 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 flex items-center justify-center text-decoration-none",children:[(0,i.jsx)("i",{className:"fas fa-envelope mr-2"}),"Email"]})]})]})})}),w&&C&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)("i",{className:"fas fa-trash text-4xl text-red-500 mb-4"}),(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Confirmar Exclus\xe3o"}),(0,i.jsxs)("p",{className:"text-gray-600",children:["Tem certeza que deseja excluir o lead de ",(0,i.jsx)("strong",{children:C.name}),"?"]}),(0,i.jsx)("p",{className:"text-sm text-red-600 mt-2",children:"Esta a\xe7\xe3o n\xe3o pode ser desfeita!"})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>{k(!1),S(null)},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancelar"}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{await c.K.deleteLead(e),r.Ay.success("Lead exclu\xeddo com sucesso!"),$(),k(!1),S(null)}catch(s){console.error("Erro ao excluir lead:",s),r.Ay.error("Erro ao excluir lead: "+s.message)}})(C.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Excluir"})]})]})})]})})}},505:(e,s,a)=>{a.d(s,{K:()=>l});const t=a(213).A.create({baseURL:"",timeout:1e4,headers:{"Content-Type":"application/json"}});t.interceptors.response.use(e=>e,e=>{var s,a,t,l;return console.error("API Response Error:",null===(s=e.response)||void 0===s?void 0:s.status,null===(a=e.config)||void 0===a?void 0:a.url,e.message),404===(null===(t=e.response)||void 0===t?void 0:t.status)?console.error("API endpoint not found"):(null===(l=e.response)||void 0===l?void 0:l.status)>=500?console.error("Server error"):"ECONNABORTED"===e.code&&console.error("Request timeout"),Promise.reject(e)});const l={async healthCheck(){try{return(await t.get("/api/health")).data}catch(e){throw console.error("Health check failed:",e),e}},async submitContact(e){try{return(await t.post("/api/contact",e)).data}catch(s){throw console.error("Contact submission failed:",s),s}},async getReviews(){try{return(await t.get("/api/reviews")).data}catch(e){return console.error("Failed to fetch reviews:",e),{reviews:[]}}},async getServices(){try{return(await t.get("/api/services")).data}catch(e){throw console.error("Failed to fetch services:",e),e}},async createBooking(e){try{return(await t.post("/api/bookings",e)).data}catch(s){throw console.error("Booking creation failed:",s),s}},async addReview(e){try{return(await t.post("/api/reviews",e)).data}catch(s){throw console.error("Review submission failed:",s),s}},async getLeads(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{let l=`/api/leads?limit=${s}&offset=${a}`;e&&(l+=`&status=${e}`);return(await t.get(l)).data}catch(l){throw console.error("Error fetching leads:",l),l}},async updateLead(e,s){try{return(await t.put(`/api/leads/${e}`,s)).data}catch(a){throw console.error("Error updating lead:",a),a}},async deleteLead(e){try{return(await t.delete(`/api/leads/${e}`)).data}catch(s){throw console.error("Error deleting lead:",s),s}},async cleanupDemoLeads(){try{return(await t.delete("/api/leads/cleanup/demo")).data}catch(e){throw console.error("Error cleaning up demo leads:",e),e}}}}}]);
//# sourceMappingURL=358.b04a068a.chunk.js.map